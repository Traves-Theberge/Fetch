# ğŸ• Fetch - Your Faithful Code Companion

> âš ï¸ **BETA PROJECT** â€” Experimental software. Review security implications before deployment.

A headless "ChatOps" development environment. Send natural language coding tasks via WhatsApp and let AI agents do the work.

```
  â €â €â €â €â €â €â €â¢€â£ â£¤â£ â£¶â šâ ›â ¿â ·â ¶â£¤â£€â¡€â €â €â €â €â €â €â €â €â €â €                                             
  â €â €â €â €â €â¢€â£´â Ÿâ ‰â €â €â¢ â¡„â €â €â €â €â €â ‰â ™â ³â£„â €â €â €â €â €â €â €â €                                             
  â €â €â €â¢€â¡´â ›â â €â €â €â €â ˜â£·â£´â â €â €â£ â¡„â €â €â¢¨â¡‡â €â €â €â €â €â €â €    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—
  â €â €â €â ºâ£‡â €â €â €â €â €â €â €â ˜â£¿â €â €â ˜â£»â£»â¡†â €â €â ™â ¦â£„â£€â €â €â €â €    â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
  â €â €â €â¢°â¡Ÿâ¢·â¡„â €â €â €â €â €â €â¢¸â¡„â €â €â €â €â €â €â €â €â €â €â ‰â¢»â ¶â¢¤â¡€    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
  â €â €â €â£¾â£‡â €â »â£„â €â €â €â €â €â¢¸â¡‡â €â €â €â €â €â €â €â €â €â €â €â ¸â£€â£´â£¿    â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â•     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘
  â €â €â¢¸â¡Ÿâ »â£†â €â ˆâ ³â¢„â¡€â €â €â¡¼â ƒâ €â €â €â €â €â €â €â €â €â ¶â ¶â¢¤â£¬â¡¿â     â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
  â €â¢€â£¿â ƒâ €â ¹â£†â €â €â €â ™â “â ¿â¢§â¡€â €â¢ â¡´â£¶â£¶â£’â£‹â£€â£€â£¤â£¶â£¶â Ÿâ â €    â•šâ•â•     â•šâ•â•â•â•â•â•â•   â•šâ•â•    â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•
  â €â£¼â¡â €â €â €â ™â €â €â €â €â €â €â €â ™â ³â ¶â ¤â µâ£¶â ’â šâ »â ¿â ‹â â €â €â €â €                                             
  â¢°â£¿â¡‡â €â €â €â €â €â €â €â£†â €â €â €â €â €â €â €â¢ â£¿â €â €â €â €â €â €â €â €â €â €    Your Faithful Code Companion                  
  â¢¿â¡¿â â €â €â €â €â €â €â €â ˜â£¦â¡€â €â €â €â €â €â¢¸â£¿â €â €â €â €â €â €â €â €â €â €                  
  â €â €â €â €â €â €â €â €â €â €â €â ˆâ »â£·â¡„â €â €â €â €â£¿â£§â €â €â €â €â €â €â €â €â €                                             
  â €â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ¢·â¡€â €â €â €â¢¸â£¿â¡„â €â €â €â €â €â €â €â €                                             
  â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ¸â£¿â ‡â €â €â €â €â €â €â €â €                                             
```

## ğŸ¯ Overview

Fetch is a **context-aware, multi-mode AI coding assistant** that understands what you need and responds appropriatelyâ€”whether it's a quick chat, a code question, a single edit, or a complex multi-step task.

### ğŸ§  4-Mode Architecture

Fetch automatically detects your intent and routes to the appropriate mode:

| Mode | When | Tools | Example |
|------|------|-------|---------|
| ğŸ’¬ **Conversation** | Greetings, thanks, general chat | None | "Hey!", "Thanks!" |
| ğŸ” **Inquiry** | Questions about code | Read-only | "What's in auth.ts?" |
| âš¡ **Action** | Single edits/changes | Full (1 cycle) | "Fix the typo on line 5" |
| ğŸ“‹ **Task** | Complex multi-step work | Full (multi-step) | "Build a login page" |

### ğŸ¤– Agentic Framework

Powered by **OpenRouter** with access to **100+ AI models**:

- **Model Flexibility** - GPT-4o, Claude, Gemini, Llama, Mistral, DeepSeek, and more
- **ReAct Loop** - Reason + Act pattern for multi-step tasks
- **24 Built-in Tools** - File, code, shell, git, and control operations
- **Session Memory** - Persistent conversation context
- **Project Awareness** - Knows your active project and git status
- **Configurable Autonomy** - Supervised, semi-autonomous, or fully autonomous modes

## ğŸ—ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Host Machine                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Go Manager    â”‚           â”‚     Docker Compose      â”‚     â”‚
â”‚  â”‚   (TUI)         â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚
â”‚  â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚ Bridge  â”‚ â”‚Kennel â”‚  â”‚     â”‚
â”‚  â”‚  â€¢ Start/Stop   â”‚           â”‚  â”‚ (Node)  â”‚ â”‚(Ubuntuâ”‚  â”‚     â”‚
â”‚  â”‚  â€¢ Configure    â”‚           â”‚  â”‚         â”‚ â”‚ +CLIs)â”‚  â”‚     â”‚
â”‚  â”‚  â€¢ View Logs    â”‚           â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚       â”‚          â”‚      â”‚     â”‚
â”‚                                â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                        â”‚          â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚          â”‚
                      WhatsApp â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                                                    â–¼
                                          /workspace (code)
```

### Intent Classification Flow

```
User Message
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Intent Classifier â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼    â–¼    â–¼        â–¼
  ğŸ’¬    ğŸ”   âš¡       ğŸ“‹
 Chat  Inquiry Action  Task
  â”‚      â”‚      â”‚       â”‚
  â–¼      â–¼      â–¼       â–¼
No     Read   Single  Multi
Tools  Only   Cycle   Step
```

## ğŸš€ Quick Start

### Prerequisites
- Linux machine (any architecture)
- Docker & Docker Compose
- Go 1.21+ (for manager)
- Node.js 20+ (for development)

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/yourusername/fetch.git
   cd fetch
   ```

2. **Configure environment**
   ```bash
   cp .env.example .env
   # Edit .env with your API keys and phone number
   ```

3. **Start with Docker Compose**
   ```bash
   docker compose up -d
   ```

4. **Scan WhatsApp QR Code**
   ```bash
   docker logs -f fetch-bridge
   # Scan the QR code that appears
   ```

### Using the Manager TUI

```bash
cd manager
go run .
```

The TUI provides a beautiful terminal interface with:
- ğŸ¨ **Horizontal Layout** - ASCII dog mascot on the left, menu on the right
- ğŸ“ **Bottom-Aligned UI** - Content aligned to bottom with status bar
- ğŸ• **Neofetch-Style Version** - Press `v` for detailed system info

**Menu Options:**
- ğŸ”§ Setup - First-time configuration wizard
- â–¶ï¸  Start - Launch Bridge & Kennel containers
- â¹ï¸  Stop - Stop running services
- âš™ï¸  Configure - Edit environment variables
- ğŸ¤– Select Model - Choose AI model via OpenRouter
- ğŸ“œ Logs - View container logs
- ğŸ“š Documentation - Open docs in browser
- â„¹ï¸  Version - System information
- ğŸšª Exit - Quit the TUI

## ğŸ“± WhatsApp Commands

| Command | Description |
|---------|-------------|
| `help` | Show available commands |
| `status` | Check system and task status |
| `ping` | Test if Fetch is responsive |

### Project Management

| Command | Description |
|---------|-------------|
| `/projects` | List available projects in workspace |
| `/project <name>` | Switch to a specific project |
| `/clone <url>` | Clone a git repository |
| `/init <name>` | Initialize a new project |
| `/status` | Show git status |
| `/diff` | Show current changes |
| `/log [n]` | Show recent commits |

### Natural Language Examples

Just describe what you need:

| You Say | Mode | What Happens |
|---------|------|--------------|
| "Hey Fetch!" | ğŸ’¬ Conversation | Quick friendly response |
| "What's in auth.ts?" | ğŸ” Inquiry | Reads and explains the file |
| "Fix the typo on line 42" | âš¡ Action | Shows diff, asks for approval |
| "Build a REST API for users" | ğŸ“‹ Task | Creates plan, executes step-by-step |

## ğŸ”’ Security

Fetch is designed with security as a top priority:

- **Whitelist Only**: Only responds to `OWNER_PHONE_NUMBER`
- **No Shell Injection**: Commands use array-based argument passing
- **Rate Limiting**: 30 requests per minute maximum
- **Input Validation**: Sanitizes all user input
- **Docker Isolation**: AI agents run in sandboxed containers
- **Read-Only Configs**: Auth tokens mounted as read-only

## ğŸ“ Project Structure

```
fetch/
â”œâ”€â”€ manager/                 # Go TUI for system management
â”‚   â”œâ”€â”€ main.go
â”‚   â””â”€â”€ internal/
â”‚       â”œâ”€â”€ config/         # .env editor
â”‚       â”œâ”€â”€ docker/         # Container control
â”‚       â”œâ”€â”€ logs/           # Log viewer
â”‚       â””â”€â”€ update/         # Git update
â”œâ”€â”€ fetch-app/              # Node.js Bridge
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ bridge/         # WhatsApp client
â”‚       â”œâ”€â”€ security/       # Auth, rate limiting
â”‚       â”œâ”€â”€ orchestrator/   # OpenRouter intent parsing
â”‚       â”œâ”€â”€ agent/          # Agentic core (ReAct loop)
â”‚       â”œâ”€â”€ session/        # Session management
â”‚       â”œâ”€â”€ tools/          # Tool registry (24 tools)
â”‚       â”œâ”€â”€ executor/       # Docker exec wrapper
â”‚       â”œâ”€â”€ tasks/          # Task persistence
â”‚       â””â”€â”€ utils/          # Logger, sanitizer
â”œâ”€â”€ kennel/                 # AI CLI container
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ config/                 # Auth token mounts
â”‚   â”œâ”€â”€ claude/
â”‚   â””â”€â”€ github/
â”œâ”€â”€ workspace/              # Code sandbox
â”œâ”€â”€ data/                   # Persistent data
â””â”€â”€ docker-compose.yml
```

## âš™ï¸ Configuration

### Required Environment Variables

| Variable | Description |
|----------|-------------|
| `OWNER_PHONE_NUMBER` | Your WhatsApp number (e.g., `15551234567`) |
| `OPENROUTER_API_KEY` | API key from [OpenRouter](https://openrouter.ai) |
| `AGENT_MODEL` | Agent model (default: `openai/gpt-4.1-nano`) |
| `ANTHROPIC_API_KEY` | API key for Claude |
| `GEMINI_API_KEY` | API key for Gemini |

### GitHub Copilot Authentication

1. On a machine with a browser:
   ```bash
   gh auth login
   ```

2. Copy the hosts file:
   ```bash
   cp ~/.config/gh/hosts.json ./config/github/
   ```

## ğŸ“ License

MIT

## ğŸ™ Acknowledgments

- [whatsapp-web.js](https://github.com/pedroslopez/whatsapp-web.js) - WhatsApp Web API
- [Bubble Tea](https://github.com/charmbracelet/bubbletea) - TUI framework
- [OpenRouter](https://openrouter.ai) - AI model routing
