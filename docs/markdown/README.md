# ğŸ• Fetch - Your Faithful Code Companion

> âš ï¸ **BETA PROJECT** â€” Experimental software. Review security implications before deployment.

A headless "ChatOps" development environment. Send natural language coding tasks via WhatsApp and let AI agents do the work.

```
  â €â €â €â €â €â €â €â¢€â£ â£¤â£ â£¶â šâ ›â ¿â ·â ¶â£¤â£€â¡€â €â €â €â €â €â €â €â €â €â €                                             
  â €â €â €â €â €â¢€â£´â Ÿâ ‰â €â €â¢ â¡„â €â €â €â €â €â ‰â ™â ³â£„â €â €â €â €â €â €â €â €                                             
  â €â €â €â¢€â¡´â ›â â €â €â €â €â ˜â£·â£´â â €â €â£ â¡„â €â €â¢¨â¡‡â €â €â €â €â €â €â €    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—
  â €â €â €â ºâ£‡â €â €â €â €â €â €â €â ˜â£¿â €â €â ˜â£»â£»â¡†â €â €â ™â ¦â£„â£€â €â €â €â €    â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
  â €â €â €â¢°â¡Ÿâ¢·â¡„â €â €â €â €â €â €â¢¸â¡„â €â €â €â €â €â €â €â €â €â €â ‰â¢»â ¶â¢¤â¡€    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
  â €â €â €â£¾â£‡â €â »â£„â €â €â €â €â €â¢¸â¡‡â €â €â €â €â €â €â €â €â €â €â €â ¸â£€â£´â£¿    â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•”â•â•â•     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘
  â €â €â¢¸â¡Ÿâ »â£†â €â ˆâ ³â¢„â¡€â €â €â¡¼â ƒâ €â €â €â €â €â €â €â €â €â ¶â ¶â¢¤â£¬â¡¿â     â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘
  â €â¢€â£¿â ƒâ €â ¹â£†â €â €â €â ™â “â ¿â¢§â¡€â €â¢ â¡´â£¶â£¶â£’â£‹â£€â£€â£¤â£¶â£¶â Ÿâ â €    â•šâ•â•     â•šâ•â•â•â•â•â•â•   â•šâ•â•    â•šâ•â•â•â•â•â•â•šâ•â•  â•šâ•â•
  â €â£¼â¡â €â €â €â ™â €â €â €â €â €â €â €â ™â ³â ¶â ¤â µâ£¶â ’â šâ »â ¿â ‹â â €â €â €â €                                             
  â¢°â£¿â¡‡â €â €â €â €â €â €â €â£†â €â €â €â €â €â €â €â¢ â£¿â €â €â €â €â €â €â €â €â €â €    Your Faithful Code Companion                  
  â¢¿â¡¿â â €â €â €â €â €â €â €â ˜â£¦â¡€â €â €â €â €â €â¢¸â£¿â €â €â €â €â €â €â €â €â €â €                  
  â €â €â €â €â €â €â €â €â €â €â €â ˆâ »â£·â¡„â €â €â €â €â£¿â£§â €â €â €â €â €â €â €â €â €                                             
  â €â €â €â €â €â €â €â €â €â €â €â €â €â ˆâ¢·â¡€â €â €â €â¢¸â£¿â¡„â €â €â €â €â €â €â €â €                                             
  â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â €â ¸â£¿â ‡â €â €â €â €â €â €â €â €                                             
```

## ğŸ¯ Overview

Fetch acts as a bridge between your WhatsApp and powerful AI coding agents:
- **Claude Code** - Complex refactoring and code generation
- **Gemini CLI** - Quick explanations and documentation
- **GitHub Copilot** - Git operations and repository help

### ğŸ¤– Agentic Framework

Fetch includes a **low-cost autonomous agent** powered by **GPT-4.1-nano via OpenRouter**:
- **ReAct Loop** - Reason + Act pattern for multi-step tasks
- **24 Built-in Tools** - File, code, shell, git, and control operations
- **Session Memory** - Persistent conversation context
- **Configurable Autonomy** - Supervised, semi-autonomous, or fully autonomous modes

## ğŸ—ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Host Machine                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Go Manager    â”‚         â”‚     Docker Compose      â”‚   â”‚
â”‚  â”‚   (TUI)         â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚                 â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  â”‚ Bridge  â”‚ â”‚Kennel â”‚  â”‚   â”‚
â”‚  â”‚  â€¢ Start/Stop   â”‚         â”‚  â”‚ (Node)  â”‚ â”‚(Ubuntuâ”‚  â”‚   â”‚
â”‚  â”‚  â€¢ Configure    â”‚         â”‚  â”‚         â”‚ â”‚ +CLIs)â”‚  â”‚   â”‚
â”‚  â”‚  â€¢ View Logs    â”‚         â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚       â”‚          â”‚      â”‚   â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚          â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚          â”‚
                    WhatsApp â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
                                                  â–¼
                                        /workspace (code)
```

## ğŸš€ Quick Start

### Prerequisites
- Linux machine (any architecture)
- Docker & Docker Compose
- Go 1.21+ (for manager)
- Node.js 20+ (for development)

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/yourusername/fetch.git
   cd fetch
   ```

2. **Configure environment**
   ```bash
   cp .env.example .env
   # Edit .env with your API keys and phone number
   ```

3. **Start with Docker Compose**
   ```bash
   docker compose up -d
   ```

4. **Scan WhatsApp QR Code**
   ```bash
   docker logs -f fetch-bridge
   # Scan the QR code that appears
   ```

### Using the Manager TUI

```bash
cd manager
go run .
```

The TUI provides:
- ğŸš€ Start/Stop services
- âš™ï¸ Configure API keys
- ğŸ“œ View logs
- ğŸ”„ Update from Git

## ğŸ“± WhatsApp Commands

| Command | Description |
|---------|-------------|
| `help` | Show available commands |
| `status` | Check system and task status |
| `ping` | Test if Fetch is responsive |

### Natural Language Tasks

Just describe what you need:

- *"Fix the authentication bug in auth.ts"* â†’ Routes to Claude
- *"Explain how useEffect works in React"* â†’ Routes to Gemini
- *"Why is my git push failing?"* â†’ Routes to Copilot

## ğŸ”’ Security

Fetch is designed with security as a top priority:

- **Whitelist Only**: Only responds to `OWNER_PHONE_NUMBER`
- **No Shell Injection**: Commands use array-based argument passing
- **Rate Limiting**: 30 requests per minute maximum
- **Input Validation**: Sanitizes all user input
- **Docker Isolation**: AI agents run in sandboxed containers
- **Read-Only Configs**: Auth tokens mounted as read-only

## ğŸ“ Project Structure

```
fetch/
â”œâ”€â”€ manager/                 # Go TUI for system management
â”‚   â”œâ”€â”€ main.go
â”‚   â””â”€â”€ internal/
â”‚       â”œâ”€â”€ config/         # .env editor
â”‚       â”œâ”€â”€ docker/         # Container control
â”‚       â”œâ”€â”€ logs/           # Log viewer
â”‚       â””â”€â”€ update/         # Git update
â”œâ”€â”€ fetch-app/              # Node.js Bridge
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ bridge/         # WhatsApp client
â”‚       â”œâ”€â”€ security/       # Auth, rate limiting
â”‚       â”œâ”€â”€ orchestrator/   # OpenRouter intent parsing
â”‚       â”œâ”€â”€ agent/          # Agentic core (ReAct loop)
â”‚       â”œâ”€â”€ session/        # Session management
â”‚       â”œâ”€â”€ tools/          # Tool registry (24 tools)
â”‚       â”œâ”€â”€ executor/       # Docker exec wrapper
â”‚       â”œâ”€â”€ tasks/          # Task persistence
â”‚       â””â”€â”€ utils/          # Logger, sanitizer
â”œâ”€â”€ kennel/                 # AI CLI container
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ config/                 # Auth token mounts
â”‚   â”œâ”€â”€ claude/
â”‚   â””â”€â”€ github/
â”œâ”€â”€ workspace/              # Code sandbox
â”œâ”€â”€ data/                   # Persistent data
â””â”€â”€ docker-compose.yml
```

## âš™ï¸ Configuration

### Required Environment Variables

| Variable | Description |
|----------|-------------|
| `OWNER_PHONE_NUMBER` | Your WhatsApp number (e.g., `15551234567`) |
| `OPENROUTER_API_KEY` | API key from [OpenRouter](https://openrouter.ai) |
| `AGENT_MODEL` | Agent model (default: `openai/gpt-4.1-nano`) |
| `ANTHROPIC_API_KEY` | API key for Claude |
| `GEMINI_API_KEY` | API key for Gemini |

### GitHub Copilot Authentication

1. On a machine with a browser:
   ```bash
   gh auth login
   ```

2. Copy the hosts file:
   ```bash
   cp ~/.config/gh/hosts.json ./config/github/
   ```

## ğŸ“ License

MIT

## ğŸ™ Acknowledgments

- [whatsapp-web.js](https://github.com/pedroslopez/whatsapp-web.js) - WhatsApp Web API
- [Bubble Tea](https://github.com/charmbracelet/bubbletea) - TUI framework
- [OpenRouter](https://openrouter.ai) - AI model routing
